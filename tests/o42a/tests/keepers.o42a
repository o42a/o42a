~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Any copyright is dedicated to the Public Domain.
http://creativecommons.org/publicdomain/zero/1.0/
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Use namespace 'Console'
Use namespace 'Test'

Keepers := test
===============

Name = "Keepers"

Print error [name] nl
Run tests

Keep constant := test (
  Name = "Keep constant"
  Print error '  ' [name] nl
  
  Kept := \\1
  Assert [kept == 1] 'Wrong initial constant keeper value'
  Assert [kept == 1] 'Wrong subsequent constant keeper value'
)

Keep variable target := test (
  Name = "Keep variable target"
  Print error '  ' [name] nl
  
  Var := ``1
  Kept := \\var
  {
    Assert [kept == 1] 'Wrong variable value kept initially'
    Var = 2
    Assert [kept == 1] 'Kept variable value updated'
  }
)

Keep string := test (
  Name = "Keep string"
  Print error '  ' [name] nl
  
  Kept := \\rt-string 'Kept'
  Assert [kept == "Kept"] 'Wrong string kept'
)

Keep link := test (
  Name = "Keep link"
  Print error '  ' [name] nl
  
  Lnk := `rt-string 'Kept'
  Kept := \\Lnk`
  Assert [kept == "Kept"] 'Wrong link kept'
)
